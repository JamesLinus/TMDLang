# 樂隊簡譜語法 Band-Score Syntax

## 基礎語法

``` 
段落名稱:樂器名@|位置|{
    <基礎拍值*>
    樂句內容
    }
```
**TMDLang 的重點語法**
_（其他跟隨便的 Markup 差不多）_     
由此可以延伸出諸如：
```
段落名稱:執行者@|時間點|{
    <計時單位*>
    """
    執行內容
    """
    }
```
希望未來可以據此記載並生成整個 Show Program 的各種需求與協作檔案。     
並以 VCS（git, svn, hg, etc...） 管理。

## 歌曲結構部份

```

->  
    Intro -> A1 -> A2 -> B -> B -> 
    A3 -> B -> B -> Ending -> __FINE__ 
->#

``` 
或者

```

-> Intro -> A1 -> A2 -> B -> B -> A3 -> B -> B -> Ending ->#

```

**以 -> 開頭直到 -># 結束表示整首歌的結構**

## 音高部份：
**以 Moving Do system（首調唱名系統）討論**

### 低八度的寫法

```
    _____________________________________________________________________
   |    |         |         |    |    |         |         |        |     |
   |    |   1'_   |   2'_   |    |    |   4'_   |   5'_   |   6'_  |     |
   |    |   2,_   |   3,_   |    |    |   5,_   |   6,_   |   7,_  |     |
   |    |         |         |    |    |         |         |        |     |
   |    |_________|_________|    |    |_________|_________|________|     |
   |         |         |         |         |         |         |         |
   |         |         |         |         |         |         |         |
   |   1_    |   2_    |   3_    |   4_    |   5_    |    6_   |    7_   |
   |_________|_________|_________|_________|_________|_________|_________|

```
### 標準八度的寫法:

```
    _____________________________________________________________________
   |    |         |         |    |    |         |         |        |     |
   |    |    1'   |    2'   |    |    |   4'    |   5'    |   6'   |     |
   |    |    2,   |    3,   |    |    |   5,    |   6,    |   7,   |     |
   |    |         |         |    |    |         |         |        |     |
   |    |_________|_________|    |    |_________|_________|________|     |
   |         |         |         |         |         |         |         |
   |         |         |         |         |         |         |         |
   |    1    |    2    |    3    |    4    |    5    |    6    |    7    |
   |_________|_________|_________|_________|_________|_________|_________|

``` 
### 高八度的寫法

```
    _____________________________________________________________________
   |    |         |         |    |    |         |         |        |     |
   |    |   1'^   |   2'^   |    |    |   4'^   |   5'^   |   6'^  |     |
   |    |   2,^   |   3,^   |    |    |   5,^   |   6,^   |   7,^  |     |
   |    |         |         |    |    |         |         |        |     |
   |    |_________|_________|    |    |_________|_________|________|     |
   |         |         |         |         |         |         |         |
   |         |         |         |         |         |         |         |
   |   1^    |   2^    |   3^    |   4^    |   5^    |    6^   |    7^   |
   |_________|_________|_________|_________|_________|_________|_________|
``` 
以此類推 etc.

### **！！！！先寫升降記號再寫八度記號！不！能！調！換！** 
#### ex:

```
可以寫 1'^^ 升 Do 高兩個八度
不能寫成 1^^^‘ 或者 1^^'^ 
```
#### 整段的高低八度寫作 
``` 
{?+12} {?-12}
```
       
#### *移調則以小二度為單位*  
```
{?+5} {?+7} etc. 
```
_整段寫法待定？_      
_(似乎也會造成 parsing 的 bug？需要細想...)_


## 節奏部份：
    <n*>...... 
    表示 n 個音湊足一個全音符
- 全音符寫法

```

        {<1*>       |1^      |4       |2       |5  }      
                
                或

        {<1*>   1^      4        2        5  }       
                
                或
                
        {<*1>1^425}

            其中(半形／半角)空格：" " ； "|"：分隔號  ","：逗點
            都不影響生成
                    .
            ｜1- - - ｜4 - - -｜ 2 - - - ｜5 - - -｜
            
``` 
- 二分音符寫法

```

        {<2*>
                    ｜1^ 3^ ｜2^ 5  ｜5  2^  ｜3^  1^
            }
            生成     .   .    .            .    .   .
                    |1 - 3 - |2 - 5 - |5 - 2 - |3 - 1 - |

``` 
- 多連音寫法
 
```
    {<4*> (125125) ^ (--)  43 }

```

    
意味著：**在兩個四分音符的時值中放進 125125 六個音**，這六個音然後接著兩個四分音符 4 跟 3。

> (這個寫法也可以拿來寫 5 連音 7 連音等等奇怪的拍型)     
> **以此類推..........**


- 鼓與 percussion 節奏型寫法

目前只支援大小聲 **XxTtSs** 六種（由左至右越來越高）

``` 

    <16*>{XsTsx--XtXsX-x-ts}


```

- 和弦部份寫法

和弦名稱必須用小括號包起來

``` 

        {<*1>
             (1)     (6m)   (4)     (4m)     (5)
             |       |      |       |        |      ｜

             (6m)   (7m7-5) (3)     (6m)    (6)
             |      |       |       |       |       |
        }
    
        其中 分隔號："|" 只是為了排版存在的符號
        不影響任何最終結果的生成

``` 

## 樂句語法

```
段落名稱:樂器名@|位置|{
    <基礎拍值*>樂句內容
    }

```
|+0| 也就是 |-0| 
以及
|+1|，|-1|，|-2|，|-2| 等
帶有正負號的位置表示：      
該樂器的此段落是有先現的旋律樂句。        
(以上單位皆爲小節)      
#### ex:

```

C1:林憶蓮@|-1|
    {<16*> 
            0---        ----     ----     5-6-
            1^---       --2^1^   ----     --56
            1^1^--      1^-2^1^  ----     ----
            6666        6-56     ----     --71^
            2^2^2^2^    2^-1^3^  -2^--    ---- 
    }

``` 
> 其中 0 爲休止符 0000， 0--- 等價；均爲四個單位的休止符。

表示**林憶蓮**的 C 段是從 **B 段的最後一個小節**開始唱

```

A1:__CHORD__@|+0|{
<1*> (1)     (6m)   (4)     (4m)     (5)
     |       |      |       |        |      ｜

     (6m)   (7m7-5) (3)     (6m)    (6)
     |      |       |       |       |       |
}
A1:GT@|-1|{<16*>|0------- 5_ 6_ 1 - 1 - 6_ - | 2- - - - - - -|
}
A1:嗩吶@|2|{<16*>|0------- 5_ 6_ 1 - 1 - 6_ - | 2- - - - - - -|
}

``` 

## 歌曲資料(Metadata of a Song)
### Credits
```
:!BAND-SCORE	                 <= 檔頭表明自己是 SHOW 類型 tmd 檔案檔案
** 三天三夜 **	                 <= 歌名用雙星號夾起來
~ "詞：阿怪"                     <=  以 ~  開始加上雙引號的字串
~ "曲：阿怪"                     <=  會直接視爲印在頁眉的歌曲資料
~ "編：Matin Tam"                <=  不會影響到其他媒體的內部資料
=~:__LYRICS__="Aguai"            <=  以 ~: 開始的並且加上雙底線的全大寫標記
=~:__SONG__=  "Aguai"            <=  如果有定義的話可以寫入 
=~:__ARR__=   "Martin Tam"       <=  MIDI/Audio/MP3/ID3 內 meta 資料
```
### 速度/調性/節奏型
```
! = 133                          <=  ! 代表速度
                                    歌曲內速度轉換寫法：
                                    {!=145}             <= 轉換爲絕對速度
                                    {!+ 30}             <= 轉換爲相對速度
                                    
```
```
? = A'                           <=  ? 代表調性
                                    歌曲內調性轉換寫法：
                                    {?=E,}             <= 轉換爲絕對音高
                                    {?+5}              <= 轉換相對音高
```
```
<4/4>                            <=  <m/n> 代表拍型 
                                    n 分音符爲一拍 
                                    每個小節有 m 拍
```
歌曲內拍型轉換寫法： **\<p/q\>** 
```         
轉換爲 q 分音符爲一拍每個小節有 p 拍
```
> _歌曲內轉換拍型寫法待定？(似乎會造成 parsing 的 bug？)_


